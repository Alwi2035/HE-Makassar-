<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Aktivitas</title>
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <style>
    body { 
      font-family: Arial, sans-serif; 
      background: #f9fafb; 
      margin: 0; 
      padding: 20px; 
    }
    .content-card { 
      background: #fff; 
      border-radius: 12px; 
      box-shadow: 0 4px 10px rgba(0,0,0,0.1); 
      overflow: hidden; 
      margin-bottom: 20px; 
      transition: transform 0.3s; 
    }
    .content-card:hover { 
      transform: translateY(-5px); 
    }
    .content-card img { 
      width: 100%; 
      height: 200px; 
      object-fit: cover; 
    }
    .p-6 { 
      padding: 16px; 
    }
    .text-brand-blue { 
      color: #1E3A8A; 
    }
    button.read-more-btn { 
      background: none; 
      border: none; 
      color: #1E3A8A; 
      font-weight: bold; 
      cursor: pointer; 
      padding: 0; 
      margin-top: 8px; 
    }
  </style>
</head>
<body>

<div id="activities-container"></div>

<script>
  // Contoh data (bisa diganti ambil dari API/CMS)
  const activities = [
    {
      attr: { 
        title: "Sains di Dapur", 
        photo: "https://placehold.co/400x300/1E3A8A/FFFFFF?text=Sains" 
      },
      body: "Eksperimen membuat letusan gunung berapi menggunakan bahan sederhana di dapur seperti soda kue dan cuka. Aktivitas ini mengajarkan reaksi kimia secara menyenangkan dan aman untuk anak-anak.",
      slug: "sains-di-dapur"
    },
    {
      attr: { 
        title: "Menanam Bibit", 
        photo: "https://placehold.co/400x300/1E3A8A/FFFFFF?text=Berkebun" 
      },
      body: "Kegiatan menanam bibit sayuran di pekarangan sekolah untuk mengenalkan proses pertumbuhan tanaman kepada murid. Murid akan memantau perkembangan tanaman setiap minggu.",
      slug: "menanam-bibit"
    }
  ];

  function createActivityCard(attr, body, slug) {
    // Konversi markdown ke HTML lalu ambil teks polos
    const fullTextHTML = marked.parse(body);
    const fullTextPlain = fullTextHTML.replace(/<[^>]*>/g, '').trim();
    const shortText = fullTextPlain.length > 150 ? fullTextPlain.substring(0, 150) + '...' : fullTextPlain;

    return `
      <div id="${slug}" class="content-card">
        <img src="${attr.photo || 'https://placehold.co/400x300/1E3A8A/FFFFFF?text=Aktivitas'}" alt="${attr.title}">
        <div class="p-6">
          <h3 class="font-bold text-xl mb-2 text-gray-800">${attr.title}</h3>
          <p class="text-gray-600 text-base" data-short="${shortText}" data-full='${fullTextHTML}'>${shortText}</p>
          ${fullTextPlain.length > 150 ? `<button class="read-more-btn" onclick="toggleReadMore(this)">Selengkapnya</button>` : ''}
        </div>
      </div>
    `;
  }

  function toggleReadMore(button) {
    const p = button.previousElementSibling;
    if (button.innerText === "Selengkapnya") {
      p.innerHTML = p.getAttribute('data-full');
      button.innerText = "Tutup";
    } else {
      p.innerText = p.getAttribute('data-short');
      button.innerText = "Selengkapnya";
    }
  }

  const container = document.getElementById("activities-container");
  container.innerHTML = activities.map(act => createActivityCard(act.attr, act.body, act.slug)).join("");
</script>

</body>
</html>
